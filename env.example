# Backend configuration
APP_ENV=local  # allowed: local|staging|production (prod/local synonyms normalized)
BACKEND_PUBLIC_BASE_URL=http://localhost:8000
# CORS_ORIGINS accepts JSON list (recommended) or CSV (also accepted).
# JSON example: CORS_ORIGINS=["https://yourapp.vercel.app","http://localhost:3000","http://127.0.0.1:3000"]
# CSV example:  CORS_ORIGINS=https://yourapp.vercel.app,http://localhost:3000,http://127.0.0.1:3000
# Invalid values won’t crash; they’re parsed best-effort and empty entries are ignored.
CORS_ORIGINS=http://localhost:3000,http://127.0.0.1:3000
DATABASE_URL=
SUPABASE_URL=
SUPABASE_ANON_KEY=
SUPABASE_SERVICE_ROLE_KEY=
SUPABASE_JWT_AUD=authenticated
SUPABASE_JWT_ISSUER=
AUTH_COOKIE_SECURE=false
ANON_SESSION_TTL_DAYS=30
IDENTITY_HASH_SALT=dev-salt
LOG_LEVEL=INFO
METRICS_ENABLED=0
# Observability is passive only; never log user_text or model outputs.
# Phase 15 baseline: bounded storage. DATABASE_URL should point to the Supabase Postgres URL.
MODEL_PROVIDER_API_KEY=
MODEL_PROVIDER_BASE_URL=
PLAN_DEFAULT=free
PRO_SUBJECTS=
MAX_SUBJECTS=
WAF_MAX_BODY_BYTES=200000
WAF_MAX_USER_TEXT_CHARS=8000
WAF_IP_BURST_LIMIT=5
WAF_IP_BURST_WINDOW_SECONDS=10
WAF_IP_SUSTAIN_LIMIT=60
WAF_IP_SUSTAIN_WINDOW_SECONDS=60
WAF_SUBJECT_BURST_LIMIT=8
WAF_SUBJECT_BURST_WINDOW_SECONDS=10
WAF_SUBJECT_SUSTAIN_LIMIT=120
WAF_SUBJECT_SUSTAIN_WINDOW_SECONDS=60
WAF_LOCKOUT_SCHEDULE_SECONDS=30,120,600,3600
WAF_LOCKOUT_COOLDOWN_SECONDS=21600
WAF_ENFORCE_ROUTES=/api/chat
# Environment separation allowlists (CSV). Required in staging/prod:
# - staging Railway must point to staging Supabase host
# - production Railway must point to production Supabase host
DB_HOST_ALLOWLIST_STAGING=
DB_HOST_ALLOWLIST_PROD=
# Performance budgets (Phase 16 Step 2)
API_CHAT_TOTAL_TIMEOUT_MS=20000
MODEL_CALL_TIMEOUT_MS=12000
OUTBOUND_HTTP_TIMEOUT_S=8.0
OUTBOUND_HTTP_CONNECT_TIMEOUT_S=3.0
OUTBOUND_HTTP_READ_TIMEOUT_S=8.0
OUTBOUND_HTTP_MAX_CONNECTIONS=20
OUTBOUND_HTTP_MAX_KEEPALIVE_CONNECTIONS=10
OUTBOUND_HTTP_KEEPALIVE_EXPIRY_S=30.0

# Cost control (Phase 16 Step 3)
COST_GLOBAL_DAILY_TOKENS=500000
COST_IP_WINDOW_SECONDS=3600
COST_IP_WINDOW_TOKENS=20000
COST_ACTOR_DAILY_TOKENS=50000
COST_REQUEST_MAX_TOKENS=6000
COST_REQUEST_MAX_OUTPUT_TOKENS=1200
COST_BREAKER_FAIL_THRESHOLD=5
COST_BREAKER_WINDOW_SECONDS=60
COST_BREAKER_COOLDOWN_SECONDS=120
COST_EVENTS_RING_SIZE=500

# Optional model overrides
LLM_REASONING_MODEL=reasoning-model
LLM_EXPRESSION_MODEL=expression-model

# Frontend configuration
NEXT_PUBLIC_API_BASE_URL=http://localhost:8000
NEXT_PUBLIC_ENV=development
